# Getting Started

This project extends the example cds bookshop project, available here: 
https://cap.cloud.sap/docs/get-started/

It demonstrates how to to use only persistence layer generated by CAP, not exposing the Resful services for the persisted entities.
In this example we extend `cat-service.js` with custom code that inserts and persists Logs in the DB during GET for the Books.
Logs entity and persistence layer is generated by CAP, but no exposure of REST-services is done for the Logs.

File or Folder | Purpose
---------|----------
`app/` | content for UI frontends goes here
`db/` | your domain models and data go here
`srv/` | your service models and code go here
`package.json` | project metadata and configuration
`readme.md` | this getting started guide


## Next steps

- Run `npm run build` to transpile Log.ts file into javascript
- Open a new terminal and run `cds watch` 
- (in VS Code simply choose _**Terminal** > Run Task > cds watch_)
- Start adding content, for example, a [db/schema.cds](db/schema.cds).

## Testing DB log population using CAP-generated code

1. open http://localhost:4004/catalog/Books
2. The request above will add logs to the Log entity in the DB (see GET code handler in `cat-service.js` )
3. To test, if log entries have been added, go to DB and type :
    `sqlite3'
    `.open db/my-bookshop.db`
    `select * from my_bookshop_Logs`
4. Alternatively you can open `cat-service.cds` and temporarily stwitch on exposure for Logs entity by adding this line:   
`entity Logs @readonly as projection on  bookshop.Logs;`  
Then, opening the Logs you should see newly added logs by calling this endpoint:
`http://localhost:4004/catalog/Logs`

## Learn More

Learn more at https://cap.cloud.sap/docs/get-started/.
